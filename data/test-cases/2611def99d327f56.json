{"uid":"2611def99d327f56","name":"Дата рождения младше 18 лет — 400 (случайный 0..17)","fullName":"tests.api.test_cached_user_validation.TestCachedUserValidation#test_birth_validation_negative_under_18","historyId":"568914067b604bc95744b6af876d0979","time":{"start":1763156253188,"stop":1763156253497,"duration":309},"status":"skipped","statusMessage":"XFAIL backend returns 500 instead of 400 (<18)\n\n_pytest.outcomes.XFailed: backend returns 500 instead of 400 (<18)","statusTrace":"self = <tests.api.test_cached_user_validation.TestCachedUserValidation object at 0x7f52c6b4b6b0>\napi = <src.api.safety_pillow_api.SafetyPillowApi object at 0x7f52c663c9e0>\n\n    @allure.story(\"Негатив\")\n    @allure.title(\"Дата рождения младше 18 лет — 400 (случайный 0..17)\")\n    def test_birth_validation_negative_under_18(self, api: SafetyPillowApi):\n        birth = _random_birth_under_18()\n        payload = BASE_VALID.copy()\n        payload[\"birthDate\"] = birth\n        attach_pretty_json({\"birthDate\": birth}, \"Параметры\")\n        resp = api.create_cached_user(payload)\n        if resp.status_code == 500:\n>           pytest.xfail(\"backend returns 500 instead of 400 (<18)\")\nE           _pytest.outcomes.XFailed: backend returns 500 instead of 400 (<18)\n\ntests/api/test_cached_user_validation.py:282: XFailed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1763156243607,"stop":1763156243665,"duration":58},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_seed_for_repro","time":{"start":1763156243665,"stop":1763156243665,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"env","time":{"start":1763156243665,"stop":1763156243665,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"http","time":{"start":1763156243665,"stop":1763156243666,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api","time":{"start":1763156243666,"stop":1763156243666,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"skipped","statusMessage":"XFAIL backend returns 500 instead of 400 (<18)\n\n_pytest.outcomes.XFailed: backend returns 500 instead of 400 (<18)","statusTrace":"self = <tests.api.test_cached_user_validation.TestCachedUserValidation object at 0x7f52c6b4b6b0>\napi = <src.api.safety_pillow_api.SafetyPillowApi object at 0x7f52c663c9e0>\n\n    @allure.story(\"Негатив\")\n    @allure.title(\"Дата рождения младше 18 лет — 400 (случайный 0..17)\")\n    def test_birth_validation_negative_under_18(self, api: SafetyPillowApi):\n        birth = _random_birth_under_18()\n        payload = BASE_VALID.copy()\n        payload[\"birthDate\"] = birth\n        attach_pretty_json({\"birthDate\": birth}, \"Параметры\")\n        resp = api.create_cached_user(payload)\n        if resp.status_code == 500:\n>           pytest.xfail(\"backend returns 500 instead of 400 (<18)\")\nE           _pytest.outcomes.XFailed: backend returns 500 instead of 400 (<18)\n\ntests/api/test_cached_user_validation.py:282: XFailed","steps":[],"attachments":[{"uid":"827b95eb0ec14f5d","name":"Параметры","source":"827b95eb0ec14f5d.json","type":"application/json","size":44},{"uid":"e10c2815a98bb09c","name":"cached/user/index - Request","source":"e10c2815a98bb09c.json","type":"application/json","size":225},{"uid":"263eb28bfc58e3f2","name":"cached/user/index - Response","source":"263eb28bfc58e3f2.json","type":"application/json","size":598},{"uid":"2185e6dfc219bd7c","name":"cached/user/index - Curl","source":"2185e6dfc219bd7c.txt","type":"text/plain","size":356}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"epic","value":"Подушка безопасности"},{"name":"story","value":"Негатив"},{"name":"feature","value":"POST /podushka-bezopasnosti/api/v1/cached/user/index — валидация"},{"name":"tag","value":"api"},{"name":"parentSuite","value":"tests.api"},{"name":"suite","value":"test_cached_user_validation"},{"name":"subSuite","value":"TestCachedUserValidation"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"1965-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.api.test_cached_user_validation"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":1,"broken":0,"skipped":3,"passed":0,"unknown":0,"total":4},"items":[{"uid":"3a6420e68774c732","status":"skipped","statusDetails":"XFAIL backend returns 500 instead of 400 (<18)\n\n_pytest.outcomes.XFailed: backend returns 500 instead of 400 (<18)","time":{"start":1763156120386,"stop":1763156120899,"duration":513}},{"uid":"2100c51bc0e7cc35","status":"skipped","statusDetails":"XFAIL backend returns 500 instead of 400 (<18)\n\n_pytest.outcomes.XFailed: backend returns 500 instead of 400 (<18)","time":{"start":1763155956959,"stop":1763155957265,"duration":306}},{"uid":"138a8ef46e817fba","status":"failed","statusDetails":"AssertionError: Ожидали 400, получили 502: <html>\r\n  <head><title>502 Bad Gateway</title></head>\r\n  <body>\r\n  <center><h1>502 Bad Gateway</h1></center>\r\n  <hr><center>nginx</center>\r\n  </body>\r\n  </html>\r\n  \nassert 502 == 400\n +  where 502 = <Response [502]>.status_code","time":{"start":1763155606216,"stop":1763155606419,"duration":203}}]},"tags":["api"]},"source":"2611def99d327f56.json","parameterValues":[]}