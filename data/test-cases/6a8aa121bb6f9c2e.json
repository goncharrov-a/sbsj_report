{"uid":"6a8aa121bb6f9c2e","name":"Старше 65 на 1 день на дату начала полиса — 400 (сейчас бывает 500 → xfail)","fullName":"tests.api.test_cached_user_validation.TestCachedUserValidation#test_birth_boundary_over_65_by_1_day","historyId":"14e2518132f03c5327bb05a6f6a10ed3","time":{"start":1763156252645,"stop":1763156253178,"duration":533},"status":"skipped","statusMessage":"XFAIL backend returns 500 instead of 400 (>65 by 1 day)\n\n_pytest.outcomes.XFailed: backend returns 500 instead of 400 (>65 by 1 day)","statusTrace":"self = <tests.api.test_cached_user_validation.TestCachedUserValidation object at 0x7f52c6b4a3c0>\napi = <src.api.safety_pillow_api.SafetyPillowApi object at 0x7f52c663c9e0>\n\n    @allure.story(\"Границы\")\n    @allure.title(\"Старше 65 на 1 день на дату начала полиса — 400 (сейчас бывает 500 → xfail)\")\n    def test_birth_boundary_over_65_by_1_day(self, api: SafetyPillowApi):\n        ref = _policy_start_local_date()\n        over = date(ref.year - 65, ref.month, ref.day) - timedelta(days=1)\n        payload = BASE_VALID.copy()\n        payload[\"birthDate\"] = _iso_date(over)\n    \n        attach_pretty_json({\"birthDate\": payload[\"birthDate\"]}, \"Параметры\")\n        resp = api.create_cached_user(payload)\n        if resp.status_code == 500:\n>           pytest.xfail(\"backend returns 500 instead of 400 (>65 by 1 day)\")\nE           _pytest.outcomes.XFailed: backend returns 500 instead of 400 (>65 by 1 day)\n\ntests/api/test_cached_user_validation.py:268: XFailed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1763156243607,"stop":1763156243665,"duration":58},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_seed_for_repro","time":{"start":1763156243665,"stop":1763156243665,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"env","time":{"start":1763156243665,"stop":1763156243665,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"http","time":{"start":1763156243665,"stop":1763156243666,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api","time":{"start":1763156243666,"stop":1763156243666,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"skipped","statusMessage":"XFAIL backend returns 500 instead of 400 (>65 by 1 day)\n\n_pytest.outcomes.XFailed: backend returns 500 instead of 400 (>65 by 1 day)","statusTrace":"self = <tests.api.test_cached_user_validation.TestCachedUserValidation object at 0x7f52c6b4a3c0>\napi = <src.api.safety_pillow_api.SafetyPillowApi object at 0x7f52c663c9e0>\n\n    @allure.story(\"Границы\")\n    @allure.title(\"Старше 65 на 1 день на дату начала полиса — 400 (сейчас бывает 500 → xfail)\")\n    def test_birth_boundary_over_65_by_1_day(self, api: SafetyPillowApi):\n        ref = _policy_start_local_date()\n        over = date(ref.year - 65, ref.month, ref.day) - timedelta(days=1)\n        payload = BASE_VALID.copy()\n        payload[\"birthDate\"] = _iso_date(over)\n    \n        attach_pretty_json({\"birthDate\": payload[\"birthDate\"]}, \"Параметры\")\n        resp = api.create_cached_user(payload)\n        if resp.status_code == 500:\n>           pytest.xfail(\"backend returns 500 instead of 400 (>65 by 1 day)\")\nE           _pytest.outcomes.XFailed: backend returns 500 instead of 400 (>65 by 1 day)\n\ntests/api/test_cached_user_validation.py:268: XFailed","steps":[],"attachments":[{"uid":"f335af91440600fd","name":"Параметры","source":"f335af91440600fd.json","type":"application/json","size":44},{"uid":"5fb8d18d0400ede8","name":"cached/user/index - Request","source":"5fb8d18d0400ede8.json","type":"application/json","size":225},{"uid":"f0b35515a03ac3cc","name":"cached/user/index - Response","source":"f0b35515a03ac3cc.json","type":"application/json","size":727},{"uid":"8840651d329898ea","name":"cached/user/index - Curl","source":"8840651d329898ea.txt","type":"text/plain","size":356}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"story","value":"Границы"},{"name":"feature","value":"POST /podushka-bezopasnosti/api/v1/cached/user/index — валидация"},{"name":"epic","value":"Подушка безопасности"},{"name":"tag","value":"api"},{"name":"parentSuite","value":"tests.api"},{"name":"suite","value":"test_cached_user_validation"},{"name":"subSuite","value":"TestCachedUserValidation"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"1965-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.api.test_cached_user_validation"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":4,"passed":0,"unknown":0,"total":4},"items":[{"uid":"44a92ca5247e8a2f","status":"skipped","statusDetails":"XFAIL backend returns 500 instead of 400 (>65 by 1 day)\n\n_pytest.outcomes.XFailed: backend returns 500 instead of 400 (>65 by 1 day)","time":{"start":1763156119733,"stop":1763156120376,"duration":643}},{"uid":"d34c681f12aa5f0c","status":"skipped","statusDetails":"XFAIL backend returns 500 instead of 400 (>65 by 1 day)\n\n_pytest.outcomes.XFailed: backend returns 500 instead of 400 (>65 by 1 day)","time":{"start":1763155956631,"stop":1763155956950,"duration":319}},{"uid":"6c78e3f6f640551f","status":"skipped","statusDetails":"XFAIL backend returns 500 instead of 400 (>65 by 1 day)\n\n_pytest.outcomes.XFailed: backend returns 500 instead of 400 (>65 by 1 day)","time":{"start":1763155605866,"stop":1763155606206,"duration":340}}]},"tags":["api"]},"source":"6a8aa121bb6f9c2e.json","parameterValues":[]}